{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.toHaveErrorMessage = toHaveErrorMessage;\n\nvar _utils = require(\"./utils\"); // See aria-errormessage spec https://www.w3.org/TR/wai-aria-1.2/#aria-errormessage\n\n\nfunction toHaveErrorMessage(htmlElement, checkWith) {\n  var _this = this;\n\n  (0, _utils.checkHtmlElement)(htmlElement, toHaveErrorMessage, this);\n\n  if (!htmlElement.hasAttribute('aria-invalid') || htmlElement.getAttribute('aria-invalid') === 'false') {\n    var not = this.isNot ? '.not' : '';\n    return {\n      pass: false,\n      message: function message() {\n        return (0, _utils.getMessage)(_this, _this.utils.matcherHint(\"\".concat(not, \".toHaveErrorMessage\"), 'element', ''), \"Expected the element to have invalid state indicated by\", 'aria-invalid=\"true\"', 'Received', htmlElement.hasAttribute('aria-invalid') ? \"aria-invalid=\\\"\".concat(htmlElement.getAttribute('aria-invalid'), \"\\\"\") : _this.utils.printReceived(''));\n      }\n    };\n  }\n\n  var expectsErrorMessage = checkWith !== undefined;\n  var errormessageIDRaw = htmlElement.getAttribute('aria-errormessage') || '';\n  var errormessageIDs = errormessageIDRaw.split(/\\s+/).filter(Boolean);\n  var errormessage = '';\n\n  if (errormessageIDs.length > 0) {\n    var document = htmlElement.ownerDocument;\n    var errormessageEls = errormessageIDs.map(function (errormessageID) {\n      return document.getElementById(errormessageID);\n    }).filter(Boolean);\n    errormessage = (0, _utils.normalize)(errormessageEls.map(function (el) {\n      return el.textContent;\n    }).join(' '));\n  }\n\n  return {\n    pass: expectsErrorMessage ? checkWith instanceof RegExp ? checkWith.test(errormessage) : this.equals(errormessage, checkWith) : Boolean(errormessage),\n    message: function message() {\n      var to = _this.isNot ? 'not to' : 'to';\n      return (0, _utils.getMessage)(_this, _this.utils.matcherHint(\"\".concat(_this.isNot ? '.not' : '', \".toHaveErrorMessage\"), 'element', ''), \"Expected the element \".concat(to, \" have error message\"), _this.utils.printExpected(checkWith), 'Received', _this.utils.printReceived(errormessage));\n    }\n  };\n}","map":null,"metadata":{},"sourceType":"script"}